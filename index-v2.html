<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitation Builder v2 - Modular with Sidebars</title>
  
  <!-- External CSS and JS modules -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link id="gfonts" href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  
  <!-- External CSS files -->
  <link rel="stylesheet" href="css/01-variables.css">
  <link rel="stylesheet" href="css/02-layout.css">
  <link rel="stylesheet" href="css/03-typography.css">
  <link rel="stylesheet" href="css/04-forms.css">
  <link rel="stylesheet" href="css/05-canvas.css">
  <link rel="stylesheet" href="css/06-animations.css">
  <link rel="stylesheet" href="css/07-notifications.css">
  <link rel="stylesheet" href="css/08-controls.css">
  <link rel="stylesheet" href="css/09-interactive.css">
  <link rel="stylesheet" href="css/10-responsive.css">
  
  <style>
    /* Additional custom styles for v2 */
    .test-button {
      background: #FF9800;
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin: 8px 0;
      width: 100%;
    }
    
    .test-button:hover {
      background: #F57C00;
    }
    
    .status-display {
      background: #f0f0f0;
      padding: 12px;
      border-radius: 8px;
      font-size: 12px;
      color: #666;
      margin-top: 16px;
    }
    
    /* Ensure stage content is properly styled */
    .stage-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
      padding: 40px;
    }
    
    .stage h1, .stage h2, .stage p {
      margin: 0;
      min-height: 24px;
      display: flex;
      align-items: center;
    }
    
    .stage h1 {
      font-size: 48px;
      margin-bottom: 20px;
      min-height: 60px;
    }
    
    .stage h2 {
      font-size: 32px;
      margin-bottom: 30px;
      min-height: 40px;
    }
    
    .stage p {
      font-size: 18px;
      margin-bottom: 30px;
    }
    
    /* Sidebar styling */
    .left-panel, .right-panel {
      background: var(--card);
      border-radius: var(--radius);
      padding: 18px 18px 24px;
      box-shadow: var(--shadow);
      overflow: auto;
    }
    
    .group {
      margin: 12px 0 16px;
    }
    
    .group-header {
      cursor: pointer;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    
    .group-header h3 {
      margin: 0;
      font-size: 14px;
      color: var(--ink);
    }
    
    .group-content {
      padding: 12px 0;
    }
    
    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    
    label {
      display: block;
      font-size: 12px;
      margin-bottom: 4px;
      color: var(--ink);
    }
    
    input, select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      font-family: var(--body-font);
    }
    
    input[type="color"] {
      height: 40px;
      cursor: pointer;
    }
    
    input[type="range"] {
      height: 20px;
    }
    
    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    
    .actions button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .actions button:hover {
      background: var(--accent-2);
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Left Sidebar: Text Editing Controls -->
    <aside class="left-panel" id="text-controls">
      <h2>‚úèÔ∏è Text Editor</h2>
      
      <!-- Text content -->
      <div class="group" data-section="text">
        <label>Top Pill Text</label>
        <input id="pill" value="Join us for a" />
      </div>
      
      <div class="group" data-section="text">
        <label>Main Title</label>
        <input id="title" value="POOL PARTY!" />
      </div>
      
      <div class="group" data-section="text">
        <label>Subtitle</label>
        <input id="subtitle" value="Celebrating" />
      </div>
      
      <div class="group">
        <label>Names / Occasion</label>
        <input id="names" value="Lincoln & Bentley's 6th Birthday" />
      </div>
      
      <div class="group row">
        <div>
          <label>Date</label>
          <input id="date" value="June 21" />
        </div>
        <div>
          <label>Time</label>
          <input id="time" value="12:00 ‚Äî 2:30 PM" />
        </div>
      </div>
      
      <div class="group">
        <label>Location</label>
        <input id="location" value="The Pointe ‚Ä¢ 1 Ballwin Commons Circle" />
      </div>
      
      <div class="group">
        <label>RSVP / Contact</label>
        <input id="rsvp" value="RSVP: Stephanie ‚Ä¢ (314) 330-0860 ‚Ä¢ sdo...@hotmail.com" />
      </div>
      
      <!-- Fonts -->
      <div class="group" data-section="text">
        <div class="group-header">
          <h3>üìù Typography</h3>
        </div>
        <div class="group-content">
          <label>Fonts (Google Fonts)</label>
          <div class="row">
            <select id="font-title">
              <option value="Playfair Display">Playfair Display</option>
              <option value="Bebas Neue">Bebas Neue</option>
              <option value="Abril Fatface">Abril Fatface</option>
              <option value="Poppins">Poppins</option>
              <option value="Montserrat">Montserrat</option>
            </select>
            <select id="font-names">
              <option value="Playfair Display">Playfair Display</option>
              <option value="Bebas Neue">Bebas Neue</option>
              <option value="Abril Fatface">Abril Fatface</option>
              <option value="Poppins">Poppins</option>
              <option value="Montserrat">Montserrat</option>
            </select>
          </div>
          <div class="row" style="margin-top:8px">
            <select id="font-body">
              <option value="Quicksand">Quicksand</option>
              <option value="Open Sans">Open Sans</option>
              <option value="Roboto">Roboto</option>
              <option value="Lato">Lato</option>
              <option value="Inter">Inter</option>
            </select>
          </div>
        </div>
      </div>
      
      <!-- Theme & Color System -->
      <div class="group" data-section="theme">
        <div class="group-header">
          <h3>üé® Theme & Colors</h3>
        </div>
        <div class="group-content">
          <label>Theme Category</label>
          <select id="category">
            <option value="pool">Pool Party</option>
            <option value="birthday">Birthday</option>
            <option value="baby">Baby Shower</option>
            <option value="graduation">Graduation</option>
            <option value="holiday">Holiday</option>
            <option value="custom">Custom Elements</option>
          </select>
          
          <div class="row">
            <div>
              <label>Primary Accent</label>
              <input type="color" id="accent" value="#2ec5ff" />
            </div>
            <div>
              <label>Secondary Accent</label>
              <input type="color" id="accent2" value="#ff6b6b" />
            </div>
          </div>
        </div>
      </div>
    </aside>
    
    <!-- Center Stage Area -->
    <main class="stage-wrap">
      <section class="stage" id="stage">
        <div class="stage-content">
          <!-- Title Display -->
          <h1 id="title-display">Invitation Builder v2</h1>
          
          <!-- Subtitle Display -->
          <p id="subtitle-display">Modular version with dual sidebars</p>
          
          <!-- Names Display -->
          <h2 id="names-display">Your Names Here</h2>
          
          <!-- Status Display -->
          <div class="status-display">
            <strong>Current Status:</strong><br>
            ‚úÖ Basic HTML structure<br>
            ‚úÖ CSS variables and layout<br>
            ‚úÖ Dual sidebar system<br>
            ‚úÖ Text input system<br>
            ‚úÖ Color system<br>
            ‚úÖ Font system<br>
            ‚úÖ Background system<br>
            ‚úÖ Validation system<br>
            üîÑ Next: Adding sprite system
          </div>
        </div>
      </section>
    </main>
    
    <!-- Right Sidebar: All Other Controls -->
    <aside class="right-panel" id="controls">
      <h2>üéõÔ∏è Controls & Effects</h2>
      
      <!-- Background System -->
      <div class="group" data-section="background">
        <div class="group-header">
          <h3>üé® Background System</h3>
        </div>
        <div class="group-content">
          <label>Background Mode</label>
          <select id="bg-mode">
            <option value="gradient">Theme Gradient</option>
            <option value="texture">Texture</option>
            <option value="image">Image</option>
            <option value="grad+tex">Gradient + Texture</option>
            <option value="img+tex">Image + Texture</option>
          </select>
          
          <!-- Texture Settings -->
          <div class="group" id="tex-controls" data-section="background">
            <h4>üé≠ Texture Settings</h4>
            <label>Texture Preset</label>
            <select id="texture">
              <option value="stripes">Diagonal Stripes</option>
              <option value="dots">Polka Dots</option>
              <option value="grid">Grid Paper</option>
              <option value="crosshatch">Crosshatch</option>
              <option value="chevron">Chevron</option>
              <option value="checker">Checkerboard</option>
              <option value="sprinkles">Sprinkles</option>
              <option value="pluses">Plus Signs</option>
              <option value="waves">Waves</option>
              <option value="noise">Noise</option>
            </select>
            
            <div class="row">
              <div>
                <label>Texture Opacity</label>
                <input type="range" id="tex-opacity" min="0" max="100" value="60" />
                <span id="tex-opacity-value">60</span>%
              </div>
              <div>
                <label>Texture Scale</label>
                <input type="range" id="tex-scale" min="20" max="200" value="100" />
                <span id="tex-scale-value">100</span>px
              </div>
            </div>
          </div>
          
          <!-- Image Settings -->
          <div class="group" id="img-controls" data-section="background">
            <h4>üñºÔ∏è Image Settings</h4>
            <label>Stock Image</label>
            <select id="stock-image">
              <optgroup label="Built-in">
                <option value="pool">Pool Scene</option>
                <option value="confetti">Confetti</option>
                <option value="clouds">Clouds</option>
              </optgroup>
            </select>
            
            <div class="row">
              <div>
                <label>Image Opacity</label>
                <input type="range" id="img-opacity" min="0" max="100" value="80" />
                <span id="img-opacity-value">80</span>%
              </div>
              <div>
                <label>Blur</label>
                <input type="range" id="img-blur" min="0" max="20" value="0" />
                <span id="img-blur-value">0</span>px
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Edge System -->
      <div class="group" data-section="edge">
        <div class="group-header">
          <h3>‚úÇÔ∏è Edge Effects</h3>
        </div>
        <div class="group-content">
          <label>Edge Style</label>
          <select id="edge-style">
            <option value="none">None</option>
            <option value="torn">Torn Paper</option>
            <option value="scalloped">Scalloped</option>
            <option value="wave">Wavy</option>
            <option value="zigzag">Zigzag</option>
            <option value="spikes">Spikes</option>
            <option value="dots">Dots</option>
            <option value="geometric">Geometric</option>
            <option value="organic">Organic</option>
            <option value="vintage">Vintage</option>
          </select>
          
          <div class="row">
            <div>
              <label>Thickness: <span id="edge-thickness-value">2</span>px</label>
              <input type="range" id="edge-thickness" min="1" max="10" value="2" step="1">
            </div>
            <div>
              <label>Opacity: <span id="edge-opacity-value">0.8</span></label>
              <input type="range" id="edge-opacity" min="0" max="1" value="0.8" step="0.1">
            </div>
          </div>
          
          <label>Edge Color</label>
          <input type="color" id="edge-color" value="#ffffff">
        </div>
      </div>
      
      <!-- Actions -->
      <div class="group">
        <div class="actions">
          <button id="randomize">üé≤ Randomize</button>
          <button id="swap">üîÑ Swap</button>
          <button id="replay">‚ñ∂Ô∏è Replay</button>
          <button id="pdf">üìÑ Print/PDF</button>
        </div>
      </div>
    </aside>
  </div>
  
  <!-- Main application script -->
  <script>
    // Initialize the application
    function initializeApp() {
      console.log('üöÄ Initializing Invitation Builder v2...');
      
      try {
        // Set up event listeners for the sidebar structure
        setupSidebarEventListeners();
        
        // Initialize all systems
        initializeAllSystems();
        
        console.log('‚úÖ Invitation Builder v2 initialized successfully');
        
      } catch (error) {
        console.error('‚ùå Failed to initialize app:', error);
      }
    }
    
    // Set up event listeners for the sidebar structure
    function setupSidebarEventListeners() {
      console.log('üîß Setting up sidebar event listeners...');
      
      // Text input listeners
      const textInputs = ['pill', 'title', 'subtitle', 'names', 'date', 'time', 'location', 'rsvp'];
      textInputs.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
          input.addEventListener('input', handleTextChange);
          console.log(`üìù Added text listener for ${id}`);
        }
      });
      
      // Color input listeners
      const colorInputs = ['accent', 'accent2'];
      colorInputs.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
          input.addEventListener('input', handleColorChange);
          console.log(`üé® Added color listener for ${id}`);
        }
      });
      
      // Font select listeners
      const fontSelects = ['font-title', 'font-names', 'font-body'];
      fontSelects.forEach(id => {
        const select = document.getElementById(id);
        if (select) {
          select.addEventListener('change', handleFontChange);
          console.log(`üî§ Added font listener for ${id}`);
        }
      });
      
      // Background system listeners
      const bgInputs = ['bg-mode', 'texture', 'tex-opacity', 'tex-scale', 'stock-image', 'img-opacity', 'img-blur'];
      bgInputs.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
          input.addEventListener('change', handleBackgroundChange);
          input.addEventListener('input', handleBackgroundChange);
          console.log(`üñºÔ∏è Added background listener for ${id}`);
        }
      });
      
      // Edge system listeners
      const edgeInputs = ['edge-style', 'edge-thickness', 'edge-opacity', 'edge-color'];
      edgeInputs.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
          input.addEventListener('change', handleEdgeChange);
          input.addEventListener('input', handleEdgeChange);
          console.log(`‚úÇÔ∏è Added edge listener for ${id}`);
        }
      });
      
      // Range input value displays
      setupRangeValueDisplays();
      
      console.log('‚úÖ All sidebar event listeners set up');
    }
    
    // Set up range input value displays
    function setupRangeValueDisplays() {
      const rangeInputs = ['tex-opacity', 'tex-scale', 'img-opacity', 'img-blur', 'edge-thickness', 'edge-opacity'];
      rangeInputs.forEach(id => {
        const input = document.getElementById(id);
        const valueSpan = document.getElementById(`${id}-value`);
        if (input && valueSpan) {
          input.addEventListener('input', () => {
            valueSpan.textContent = input.value;
          });
        }
      });
    }
    
    // Event handler functions
    function handleTextChange(event) {
      const input = event.target;
      const value = input.value;
      const id = input.id;
      
      console.log(`üìù Text changed: ${id} = "${value}"`);
      
      // Update corresponding display elements
      switch (id) {
        case 'title':
          updateDisplayElement('title-display', value);
          break;
        case 'subtitle':
          updateDisplayElement('subtitle-display', value);
          break;
        case 'names':
          updateDisplayElement('names-display', value);
          break;
        // Add other text fields as needed
      }
    }
    
    function handleColorChange(event) {
      const input = event.target;
      const value = input.value;
      const id = input.id;
      
      console.log(`üé® Color changed: ${id} = ${value}`);
      
      // Update CSS variables
      if (id === 'accent') {
        document.documentElement.style.setProperty('--accent', value);
        updateDisplayElement('title-display', null, { color: value });
      } else if (id === 'accent2') {
        document.documentElement.style.setProperty('--accent-2', value);
        updateDisplayElement('names-display', null, { color: value });
      }
    }
    
    function handleFontChange(event) {
      const select = event.target;
      const value = select.value;
      const id = select.id;
      
      console.log(`üî§ Font changed: ${id} = ${value}`);
      
      // Update fonts
      updateFonts();
    }
    
    function handleBackgroundChange(event) {
      const input = event.target;
      const value = input.value;
      const id = input.id;
      
      console.log(`üñºÔ∏è Background changed: ${id} = ${value}`);
      
      // Update background
      updateBackground();
    }
    
    function handleEdgeChange(event) {
      const input = event.target;
      const value = input.value;
      const id = input.id;
      
      console.log(`‚úÇÔ∏è Edge changed: ${id} = ${value}`);
      
      // Update edge effects
      updateEdgeEffects();
    }
    
    // Helper functions
    function updateDisplayElement(elementId, text, styles = {}) {
      const element = document.getElementById(elementId);
      if (element) {
        if (text !== null) {
          element.textContent = text;
        }
        if (styles) {
          Object.assign(element.style, styles);
        }
      }
    }
    
    // Placeholder functions for systems that will be implemented
    function updateFonts() {
      console.log('üî§ Font system update (to be implemented)');
    }
    
    function updateBackground() {
      console.log('üñºÔ∏è Background system update (to be implemented)');
    }
    
    function updateEdgeEffects() {
      console.log('‚úÇÔ∏è Edge effects update (to be implemented)');
    }
    
    // Initialize all systems
    function initializeAllSystems() {
      console.log('üöÄ Initializing all systems...');
      
      // Set initial values for display elements
      const initialTexts = {
        'title-display': 'POOL PARTY!',
        'subtitle-display': 'Celebrating',
        'names-display': 'Lincoln & Bentley\'s 6th Birthday'
      };
      
      Object.entries(initialTexts).forEach(([id, text]) => {
        updateDisplayElement(id, text);
      });
      
      console.log('‚úÖ All systems initialized');
    }
    
    // Start the application when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
      initializeApp();
    }
  </script>
</body>
</html>
